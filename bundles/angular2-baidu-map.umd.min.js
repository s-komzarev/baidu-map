!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("angular2-baidu-map",["exports","@angular/core"],e):e((t=t||self)["angular2-baidu-map"]={},t.ng.core)}(this,(function(t,e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var n,o;function i(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function r(t){return null==t}function a(t){return void 0===t}function s(t){return"[object Boolean]"===Object.prototype.toString.call(t)}function p(t){return"[object String]"===Object.prototype.toString.call(t)}function c(t){return e=t.getTileLayer,!("[object Function]"===Object.prototype.toString.call(e));var e}function l(t){return t?new window.BMap.Point(t.lng,t.lat):new window.BMap.Point}function u(t){return t?t.map((function(t){return new window.BMap.Point(t.lng,t.lat)})):[]}function d(t){return t?new window.BMap.Size(t.width,t.height):new window.BMap.Size}function f(t,e,n){if(!e&&!n)return new window.BMap.Icon(t);if(!e)return new window.BMap.Icon(t,d(e));var o={anchor:d(n.anchor),imageOffset:d(n.imageOffset),infoWindowAnchor:d(n.infoWindowAnchor),printImageUrl:n.printImageUrl},i=new window.BMap.Icon(t,d(e),o);return n.imageSize&&i.setImageSize(d(n.imageSize)),i}function h(t){var e={};return t?(t.offset&&(e.offset=d(t.offset)),t.icon&&(e.icon=f(t.icon.imageUrl,t.icon.size,t.icon)),r(t.enableMassClear)||(e.enableMassClear=t.enableMassClear),r(t.enableDragging)||(e.enableDragging=t.enableDragging),r(t.enableClicking)||(e.enableClicking=t.enableClicking),r(t.raiseOnDrag)||(e.raiseOnDrag=t.raiseOnDrag),r(t.draggingCursor)||(e.draggingCursor=t.draggingCursor),r(t.rotation)||(e.rotation=t.rotation),r(t.title)||(e.title=t.title),r(t.shadow)||(e.shadow=f(t.shadow.imageUrl,t.shadow.size,t.shadow)),e):e}function y(t){var e={url:t.url,size:d(t.size)};return t.anchor&&(e.anchor=d(t.anchor)),t.offset&&(e.offset=d(t.offset)),r(t.textSize)||(e.textSize=t.textSize),r(t.textColor)||(e.textColor=t.textColor),e}function m(t,e){if(r(t))throw new Error(e)}(n=t.MapTypeEnum||(t.MapTypeEnum={})).BMAP_NORMAL_MAP="BMAP_NORMAL_MAP",n.BMAP_PERSPECTIVE_MAP="BMAP_PERSPECTIVE_MAP",n.BMAP_SATELLITE_MAP="BMAP_SATELLITE_MAP",n.BMAP_HYBRID_MAP="BMAP_HYBRID_MAP",function(t){t[t.NON=0]="NON",t[t.LOADED=1]="LOADED",t[t.LOADING=2]="LOADING"}(o||(o={}));var g=function(){this.ak=""},v=function(){function t(){window._scriptLoadState={},window._loadingCallbacks={}}return t.prototype.load=function(t,e,n){void 0===e&&(e=!1);var i=p(t)?t:t.key,r=p(t)?[t]:t.scripts;if(window._scriptLoadState[i]===o.LOADED)return e&&(O("baidu-map .baidu-map-instance","block"),O("baidu-map .baidu-map-offline","none")),n();window._loadingCallbacks[i]||(window._loadingCallbacks[i]=[]),window._scriptLoadState[i]!==o.LOADING?(window._scriptLoadState[i]=o.LOADING,window._loadingCallbacks[i].push(n),e&&(window.baidumapinit=function(){window._scriptLoadState[i]=o.LOADED,O("baidu-map .baidu-map-instance","block"),O("baidu-map .baidu-map-offline","none"),window._loadingCallbacks[i].forEach((function(t){t()}))}),function(t,e,n){var i={count:e.length};e.forEach((function(e){!function t(e,n,i,r){var a=document.createElement("script");a.type="text/javascript",a.src=n,a.onerror=function(){i&&(O("baidu-map .baidu-map-offline","block"),O("baidu-map .baidu-map-instance","none")),document.body.removeChild(a),setTimeout((function(){t(e,n,i,r)}),3e4)},i||(a.onload=function(){r.count--,r.count||(window._scriptLoadState[e]=o.LOADED,window._loadingCallbacks[e].forEach((function(t){t()})))});document.body.appendChild(a)}(t,e,n,i)}))}(i,r,e)):window._loadingCallbacks[i].push(n)},t=i([e.Injectable()],t)}();function O(t,e){Array.prototype.slice.call(document.querySelectorAll(t)).forEach((function(t){t.style.display=e}))}var w,C,b,M,A,k=function(){function t(t,e){var n=this;this.loader=e,m(t.ak,"ak must be provided"),this.config=t,this.map=new Promise((function(t){n.mapResolver=t}))}var n,o;return t.prototype.createMap=function(t,e){var n=this,o="https://api.map.baidu.com/api?v=2.0&ak="+this.config.ak+"&callback=baidumapinit";return new Promise((function(i){n.loader.load(o,!0,(function(){var o=new window.BMap.Map(t,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=Object.keys(t),i=o.filter((function(t){return e.indexOf(t)<0}));return i.reduce((function(e,n){return e[n]=t[n],e}),{})}(e,"mapType"));n.setOptions(e),n.mapResolver(o),i(o)}))}))},t.prototype.setOptions=function(t){var e=t.disableDragging,n=t.enableScrollWheelZoom,o=t.disableDoubleClickZoom,i=t.enableKeyboard,a=t.enableInertialDragging,p=t.enableAutoResize,u=t.enableContinuousZoom,d=t.disablePinchToZoom;s(e)&&this.map.then((function(t){return t[(e?"disable":"enable")+"Dragging"]()})),s(n)&&this.map.then((function(t){return t[(n?"enable":"disable")+"ScrollWheelZoom"]()})),s(p)&&this.map.then((function(t){return t[(p?"enable":"disable")+"AutoResize"]()})),s(o)&&this.map.then((function(t){return t[(o?"disable":"enable")+"DoubleClickZoom"]()})),s(i)&&this.map.then((function(t){return t[(i?"enable":"disable")+"Keyboard"]()})),s(a)&&this.map.then((function(t){return t[(a?"enable":"disable")+"InertialDragging"]()})),s(u)&&this.map.then((function(t){return t[(u?"enable":"disable")+"ContinuousZoom"]()})),s(d)&&this.map.then((function(t){return t[(d?"disable":"enable")+"PinchToZoom"]()})),r(t.cursor)||this.map.then((function(e){return e.setDefaultCursor(t.cursor)})),r(t.draggingCursor)||this.map.then((function(e){return e.setDraggingCursor(t.draggingCursor)})),r(t.currentCity)||this.map.then((function(e){return e.setCurrentCity(t.currentCity)})),r(t.centerAndZoom)||this.map.then((function(e){e.centerAndZoom(l(t.centerAndZoom),t.centerAndZoom.zoom)})),r(t.mapType)||this.map.then((function(e){var n=c(t.mapType)?window[t.mapType]:t.mapType;e.setMapType(n)}))},t.prototype.addOverlay=function(t){return this.map.then((function(e){var n=t(e);return e.addOverlay(n),{map:e,overlay:n}}))},t.prototype.removeOverlay=function(t){return this.map.then((function(e){e.removeOverlay(t)}))},t.prototype.addTileLayer=function(t){return this.map.then((function(e){var n=t(e);return e.addTileLayer(n),{map:e,tilelayer:n}}))},t.prototype.removeTileLayer=function(t){return this.map.then((function(e){e.removeOverlay(t)}))},t.prototype.addControl=function(t){return this.map.then((function(e){var n=t(e);return e.addControl(n),{map:e,control:n}}))},t.prototype.removeControl=function(t){return this.map.then((function(e){e.removeControl(t)}))},t.prototype.getNativeMap=function(){return this.map},t.ctorParameters=function(){return[{type:g,decorators:[{type:e.Inject,args:[g]}]},{type:v}]},t=i([e.Injectable(),(n=0,o=e.Inject(g),function(t,e){o(t,e,n)})],t)}(),_=function(){function t(t){this.service=t,this.loaded=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;m(this.type,"type is required for <control>"),this.service.addControl((function(){return t.control=t.createControl(t.type,t.options),t.control})).then((function(e){var n=e.control;t.loaded.emit(n)}))},t.prototype.ngOnDestroy=function(){this.service.removeControl(this.control)},t.prototype.createControl=function(t,e){if("navigation"===t)return new window.BMap.NavigationControl(function(t){var e={};return t?(r(t.anchor)||(e.anchor=t.anchor),r(t.enableGeolocation)||(e.enableGeolocation=t.enableGeolocation),r(t.offset)||(e.offset=d(t.offset)),r(t.showZoomInfo)||(e.showZoomInfo=t.showZoomInfo),r(t.type)||(e.type=t.type),e):e}(e));if("overviewmap"===t)return new window.BMap.OverviewMapControl(function(t){var e={};return t?(r(t.anchor)||(e.anchor=t.anchor),r(t.isOpen)||(e.isOpen=t.isOpen),r(t.offset)||(e.offset=d(t.offset)),r(t.size)||(e.size=d(t.size)),e):e}(e));if("scale"===t)return new window.BMap.ScaleControl(function(t){var e={};return t?(r(t.anchor)||(e.anchor=t.anchor),r(t.offset)||(e.offset=d(t.offset)),e):e}(e));if("maptype"===t)return new window.BMap.MapTypeControl(function(t){var e={};return t?(r(t.type)||(e.type=t.type),r(t.mapTypes)||(e.mapTypes=t.mapTypes.map((function(t){return c(t)?window[t]:t}))),e):e}(e));if("geolocation"===t)return new window.BMap.GeolocationControl(function(t){var e={};return t?(r(t.anchor)||(e.anchor=t.anchor),r(t.offset)||(e.offset=d(t.offset)),r(t.enableAutoLocation)||(e.enableAutoLocation=t.enableAutoLocation),r(t.locationIcon)||(e.locationIcon=f(t.locationIcon.imageUrl,t.locationIcon.size,t.locationIcon)),r(t.showAddressBar)||(e.showAddressBar=t.showAddressBar),e):e}(e));if("panorama"===t)return new window.BMap.PanoramaControl;throw new Error("Unsupported type:"+t+" of control")},t.ctorParameters=function(){return[{type:k}]},i([e.Input()],t.prototype,"type",void 0),i([e.Input()],t.prototype,"options",void 0),i([e.Output()],t.prototype,"loaded",void 0),t=i([e.Directive({selector:"control"})],t)}(),I=function(){function t(t){this.service=t,this.loaded=new e.EventEmitter,this.clicked=new e.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){var t=this;m(this.options,"options is required for <baidu-map>"),m(this.options.centerAndZoom,"options.centerAndZoom is required for <baidu-map>"),this.service.createMap(this.mapInstance.nativeElement,this.options).then((function(e){return t.loaded.emit(e),e})).then((function(e){t.addListener(e)}))},t.prototype.ngOnChanges=function(t){var e=t.options.currentValue;if(!e)return console.warn("MapOptions change was ignored since you are passing empty value");this.service.setOptions(e)},t.prototype.ngOnDestroy=function(){console.log("on map destroy")},t.prototype.addListener=function(t){var e=this;t.addEventListener("click",(function(t){e.clicked.emit(t)}))},t.ctorParameters=function(){return[{type:k}]},i([e.Input()],t.prototype,"options",void 0),i([e.Output()],t.prototype,"loaded",void 0),i([e.Output()],t.prototype,"clicked",void 0),i([e.ViewChild("mapinstance",{static:!1})],t.prototype,"mapInstance",void 0),t=i([e.Component({providers:[k],selector:"baidu-map",template:'\n    <div #mapinstance class="baidu-map-instance"></div>\n    <div class="baidu-map-offline">\n      <label>{{ \'NO_NETWORK\' }}</label>\n    </div>\n    <div class="tranclude-content">\n      <ng-content></ng-content>\n    </div>\n  ',styles:["\n      .baidu-map-instance {\n        width: 100%;\n        height: 100%;\n        display: none;\n      }\n      .baidu-map-offline {\n        width: 100%;\n        height: 100%;\n        background-color: #e6e6e6;\n        position: relative;\n        display: none;\n      }\n      .baidu-map-offline label {\n        fontsize: 30px;\n        margin: 0;\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        margin-right: -50%;\n        transform: translate(-50%, -50%);\n      }\n      .tranclude-content {\n        display: none;\n      }\n    "]})],t)}(),P=function(){function t(t){this.service=t,this.loaded=new e.EventEmitter,this.clicked=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;m(this.point,"point is required for <marker>"),this.service.addOverlay((function(){return t.marker=new window.BMap.Marker(l(t.point),h(t.options))})).then((function(e){var n=e.map;t.loaded.emit(t.marker),t.addListener(t.marker,n)})).then((function(){t.marker.setPosition(new window.BMap.Point(t.point.lng,t.point.lat))}))},t.prototype.ngOnChanges=function(t){t.point&&!t.point.isFirstChange()&&this.marker.setPosition(l(t.point.currentValue)),t.options&&!t.options.isFirstChange()&&this.setOptions(t.options.currentValue)},t.prototype.ngOnDestroy=function(){this.service.removeOverlay(this.marker)},t.prototype.setOptions=function(t){r(t)||(r(t.offset)||this.marker.setOffset(d(t.offset)),r(t.icon)||this.marker.setIcon(f(t.icon.imageUrl,t.icon.size,t.icon)),r(t.enableMassClear)||this.marker[(t.enableMassClear?"enable":"disable")+"MassClear"](),r(t.enableDragging)||this.marker[(t.enableDragging?"enable":"disable")+"Dragging"](),r(t.rotation)||this.marker.setRotation(t.rotation),r(t.shadow)||this.marker.setShadow(f(t.shadow.imageUrl,t.shadow.size,t.shadow)),r(t.title)||this.marker.setTitle(t.title))},t.prototype.addListener=function(t,e){var n=this;t.addEventListener("click",(function(o){n.clicked.emit({e:o,map:e,marker:t})}))},t.ctorParameters=function(){return[{type:k}]},i([e.Input()],t.prototype,"point",void 0),i([e.Input()],t.prototype,"options",void 0),i([e.Output()],t.prototype,"loaded",void 0),i([e.Output()],t.prototype,"clicked",void 0),t=i([e.Directive({selector:"marker"})],t)}(),T=function(){function t(t){this.service=t,this.loaded=new e.EventEmitter,this.clicked=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;m(this.points,"points is required for <polyline>"),this.service.addOverlay((function(){return t.polyline=new window.BMap.Polyline(u(t.points),t.options)})).then((function(e){var n=e.map;t.loaded.emit(t.polyline),t.addListener(t.polyline,n)}))},t.prototype.ngOnChanges=function(t){t.points&&!t.points.isFirstChange()&&this.polyline.setPath(u(t.points.currentValue)),t.options&&!t.options.isFirstChange()&&this.setOptions(t.options.currentValue)},t.prototype.ngOnDestroy=function(){this.service.removeOverlay(this.polyline)},t.prototype.setOptions=function(t){r(t)||(a(t.enableEditing)||(t.enableEditing?this.polyline.enableEditing():this.polyline.disableEditing()),a(t.enableMassClear)||(t.enableEditing?this.polyline.enableMassClear():this.polyline.disableMassClear()),a(t.strokeColor)||this.polyline.setStrokeColor(t.strokeColor),a(t.strokeOpacity)||this.polyline.setStrokeOpacity(t.strokeOpacity),a(t.strokeStyle)||this.polyline.setStrokeStyle(t.strokeStyle),a(t.strokeWeight)||this.polyline.setStrokeWeight(t.strokeWeight))},t.prototype.addListener=function(t,e){var n=this;t.addEventListener("click",(function(o){console.log("sfdsfdsfds"),n.clicked.emit({e:o,map:e,polyline:t})}))},t.ctorParameters=function(){return[{type:k}]},i([e.Input()],t.prototype,"points",void 0),i([e.Input()],t.prototype,"options",void 0),i([e.Output()],t.prototype,"loaded",void 0),i([e.Output()],t.prototype,"clicked",void 0),t=i([e.Directive({selector:"polyline"})],t)}(),E=function(){function t(t){this.service=t,this.loaded=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;m(this.center,"center is required for <circle>"),m(this.radius,"center is required for <circle>"),this.service.addOverlay((function(){return t.circle=new window.BMap.Circle(l(t.center),t.radius,t.options)})).then((function(){t.loaded.emit(t.circle)}))},t.prototype.ngOnChanges=function(t){t.center&&!t.center.isFirstChange()&&this.circle.setCenter(l(t.center.currentValue)),t.radius&&!t.radius.isFirstChange()&&this.circle.setRadius(t.radius.currentValue),t.options&&!t.options.isFirstChange()&&this.setOptions(t.options.currentValue)},t.prototype.ngOnDestroy=function(){this.service.removeOverlay(this.circle)},t.prototype.setOptions=function(t){r(t)||(a(t.enableEditing)||(t.enableEditing?this.circle.enableEditing():this.circle.disableEditing()),a(t.enableMassClear)||(t.enableEditing?this.circle.enableMassClear():this.circle.disableMassClear()),a(t.strokeColor)||this.circle.setStrokeColor(t.strokeColor),a(t.fillColor)||this.circle.setFillColor(t.fillColor),a(t.strokeOpacity)||this.circle.setStrokeOpacity(t.strokeOpacity),a(t.fillOpacity)||this.circle.setFillOpacity(t.fillOpacity),a(t.strokeStyle)||this.circle.setStrokeStyle(t.strokeStyle),a(t.strokeWeight)||this.circle.setStrokeWeight(t.strokeWeight))},t.ctorParameters=function(){return[{type:k}]},i([e.Input()],t.prototype,"center",void 0),i([e.Input()],t.prototype,"radius",void 0),i([e.Input()],t.prototype,"options",void 0),i([e.Output()],t.prototype,"loaded",void 0),t=i([e.Directive({selector:"circle"})],t)}(),L=function(){function t(t){this.service=t,this.loaded=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;m(this.points,"points is required for <polygon>"),this.service.addOverlay((function(){return t.polygon=new window.BMap.Polygon(u(t.points),t.options)})).then((function(){t.loaded.emit(t.polygon)}))},t.prototype.ngOnChanges=function(t){t.points&&!t.points.isFirstChange()&&this.polygon.setPath(u(t.points.currentValue)),t.options&&!t.options.isFirstChange()&&this.setOptions(t.options.currentValue)},t.prototype.ngOnDestroy=function(){this.service.removeOverlay(this.polygon)},t.prototype.setOptions=function(t){r(t)||(a(t.enableEditing)||(t.enableEditing?this.polygon.enableEditing():this.polygon.disableEditing()),a(t.enableMassClear)||(t.enableEditing?this.polygon.enableMassClear():this.polygon.disableMassClear()),a(t.strokeColor)||this.polygon.setStrokeColor(t.strokeColor),a(t.fillColor)||this.polygon.setFillColor(t.fillColor),a(t.strokeOpacity)||this.polygon.setStrokeOpacity(t.strokeOpacity),a(t.fillOpacity)||this.polygon.setFillOpacity(t.fillOpacity),a(t.strokeStyle)||this.polygon.setStrokeStyle(t.strokeStyle),a(t.strokeWeight)||this.polygon.setStrokeWeight(t.strokeWeight))},t.ctorParameters=function(){return[{type:k}]},i([e.Input()],t.prototype,"points",void 0),i([e.Input()],t.prototype,"options",void 0),i([e.Output()],t.prototype,"loaded",void 0),t=i([e.Directive({selector:"polygon"})],t)}(),N=function(){function t(t,n){this.service=t,this.scriptLoader=n,this.loaded=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;m(this.dataset,"dataset is required for <heatmap>"),this.service.getNativeMap().then((function(){return t.scriptLoader.load("https://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js",!1,(function(){t.service.addOverlay((function(){return t.heatmap=new window.BMapLib.HeatmapOverlay(t.options)})).then((function(){t.loaded.emit(t.heatmap),t.dataset&&t.heatmap.setDataSet(t.dataset)}))}))}))},t.prototype.ngOnChanges=function(t){t.dataset&&!t.dataset.isFirstChange()&&this.heatmap.setDataSet(t.dataset.currentValue),t.options&&!t.options.isFirstChange()&&this.heatmap.setOptions(t.options.currentValue)},t.prototype.ngOnDestroy=function(){this.service.removeOverlay(this.heatmap)},t.ctorParameters=function(){return[{type:k},{type:v}]},i([e.Input()],t.prototype,"dataset",void 0),i([e.Input()],t.prototype,"options",void 0),i([e.Output()],t.prototype,"loaded",void 0),t=i([e.Directive({selector:"heatmap"})],t)}(),B=function(){function t(t){this.service=t,this.loaded=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this,e=this.getTilesUrl;this.service.addTileLayer((function(){return t.tilelayer=new window.BMap.TileLayer(t.options),t.getTilesUrl&&(t.tilelayer.getTilesUrl=function(t,n){return e(t,n)}),t.tilelayer})).then((function(){t.loaded.emit(t.tilelayer)}))},t.prototype.ngOnDestroy=function(){this.service.removeTileLayer(this.tilelayer)},t.ctorParameters=function(){return[{type:k}]},i([e.Input()],t.prototype,"getTilesUrl",void 0),i([e.Input()],t.prototype,"options",void 0),i([e.Output()],t.prototype,"loaded",void 0),t=i([e.Directive({selector:"tilelayer"})],t)}(),D=function(){function t(t){this.service=t,this.loaded=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;this.service.addTileLayer((function(){return t.trafficlayer=new window.BMap.TrafficLayer(t.options),t.trafficlayer})).then((function(){t.loaded.emit(t.trafficlayer)}))},t.prototype.ngOnDestroy=function(){this.service.removeTileLayer(this.trafficlayer)},t.ctorParameters=function(){return[{type:k}]},i([e.Input()],t.prototype,"options",void 0),i([e.Output()],t.prototype,"loaded",void 0),t=i([e.Directive({selector:"trafficlayer"})],t)}(),S=function(){function t(t){this.service=t,this.loaded=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;this.service.addOverlay((function(e){return t.canvaslayer=new window.BMap.CanvasLayer(t.getOptions(t.options,e)),t.canvaslayer})).then((function(){t.loaded.emit(t.canvaslayer)}))},t.prototype.ngOnDestroy=function(){this.service.removeOverlay(this.canvaslayer)},t.prototype.getOptions=function(t,e){if(t){var n,o={};return n=t.zIndex,"[object Number]"===Object.prototype.toString.call(n)&&(o.zIndex=t.zIndex),t.paneName&&(o.paneName=t.paneName),t.update&&(o.update=function(){return t.update(e,this.canvas)}),o}},t.ctorParameters=function(){return[{type:k}]},i([e.Input()],t.prototype,"options",void 0),i([e.Output()],t.prototype,"loaded",void 0),t=i([e.Directive({selector:"canvaslayer"})],t)}(),R={key:"markerClusterer",scripts:["https://api.map.baidu.com/library/MarkerClusterer/1.2/src/MarkerClusterer_min.js","https://api.map.baidu.com/library/TextIconOverlay/1.2/src/TextIconOverlay_min.js"]},z=function(){function t(t,n){this.service=t,this.scriptLoader=n,this.loaded=new e.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;m(this.options,"options is required for <marker-clusterer>"),this.service.getNativeMap().then((function(e){return t.scriptLoader.load(R,!1,(function(){var n,o;t.markerClusterer=new window.BMapLib.MarkerClusterer(e,(n=t.options,o={},n?(n.markers&&(o.markers=n.markers.map((function(t){return new window.BMap.Marker(l(t.point),h(t.options))}))),r(n.girdSize)||(o.girdSize=n.girdSize),r(n.maxZoom)||(o.maxZoom=n.maxZoom),r(n.minClusterSize)||(o.minClusterSize=n.minClusterSize),r(n.isAverangeCenter)||(o.isAverangeCenter=n.isAverangeCenter),n.styles&&(o.styles=n.styles.filter((function(t){return t})).map((function(t){return y(t)}))),o):o)),t.loaded.emit(t.markerClusterer)}))}))},t.prototype.ngOnChanges=function(t){t.options&&!t.options.isFirstChange()&&this.resetOptions(t.options.currentValue)},t.prototype.resetOptions=function(t){t.markers&&(this.markerClusterer.clearMarkers(),this.markerClusterer.addMarkers(t.markers.map((function(t){return new window.BMap.Marker(l(t.point),h(t.options))})))),a(t.girdSize)||this.markerClusterer.setGridSize(t.girdSize),a(t.maxZoom)||this.markerClusterer.setMaxZoom(t.maxZoom),t.styles&&this.markerClusterer.setStyles(t.styles.filter((function(t){return t})).map((function(t){return y(t)})))},t.prototype.ngOnDestroy=function(){this.markerClusterer.clearMarkers()},t.ctorParameters=function(){return[{type:k},{type:v}]},i([e.Input()],t.prototype,"options",void 0),i([e.Output()],t.prototype,"loaded",void 0),t=i([e.Directive({selector:"marker-clusterer"})],t)}();(w=t.ControlAnchor||(t.ControlAnchor={}))[w.BMAP_ANCHOR_TOP_LEFT=0]="BMAP_ANCHOR_TOP_LEFT",w[w.BMAP_ANCHOR_TOP_RIGHT=1]="BMAP_ANCHOR_TOP_RIGHT",w[w.BMAP_ANCHOR_BOTTOM_LEFT=2]="BMAP_ANCHOR_BOTTOM_LEFT",w[w.BMAP_ANCHOR_BOTTOM_RIGHT=3]="BMAP_ANCHOR_BOTTOM_RIGHT",(C=t.NavigationControlType||(t.NavigationControlType={}))[C.BMAP_NAVIGATION_CONTROL_LARGE=0]="BMAP_NAVIGATION_CONTROL_LARGE",C[C.BMAP_NAVIGATION_CONTROL_SMALL=1]="BMAP_NAVIGATION_CONTROL_SMALL",C[C.BMAP_NAVIGATION_CONTROL_PAN=2]="BMAP_NAVIGATION_CONTROL_PAN",C[C.BMAP_NAVIGATION_CONTROL_ZOOM=3]="BMAP_NAVIGATION_CONTROL_ZOOM",(b=t.MapTypeControlType||(t.MapTypeControlType={}))[b.BMAP_MAPTYPE_CONTROL_HORIZONTAL=0]="BMAP_MAPTYPE_CONTROL_HORIZONTAL",b[b.BMAP_MAPTYPE_CONTROL_DROPDOWN=1]="BMAP_MAPTYPE_CONTROL_DROPDOWN",b[b.BMAP_MAPTYPE_CONTROL_MAP=2]="BMAP_MAPTYPE_CONTROL_MAP",(M=t.LengthUnit||(t.LengthUnit={})).BMAP_UNIT_METRIC="metric",M.BMAP_UNIT_IMPERIAL="us",(A=t.Animation||(t.Animation={}))[A.BMAP_ANIMATION_DROP=1]="BMAP_ANIMATION_DROP",A[A.BMAP_ANIMATION_BOUNCE=2]="BMAP_ANIMATION_BOUNCE";var Z=function(){function t(){}var n;return n=t,t.forRoot=function(t){return{ngModule:n,providers:[{provide:g,useValue:t},v]}},t=n=i([e.NgModule({declarations:[I,P,_,T,E,L,N,B,D,S,z],exports:[I,P,_,T,E,L,N,B,D,S,z]})],t)}();t.BaiduMapModule=Z,t.ɵa=I,t.ɵb=k,t.ɵc=g,t.ɵd=v,t.ɵe=P,t.ɵf=_,t.ɵg=T,t.ɵh=E,t.ɵi=L,t.ɵj=N,t.ɵk=B,t.ɵl=D,t.ɵm=S,t.ɵn=z,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular2-baidu-map.umd.min.js.map